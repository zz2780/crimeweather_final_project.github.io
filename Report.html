<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Report</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Clean-data.html">Data</a>
</li>
<li>
  <a href="statistical-test.html">Statistical Test</a>
</li>
<li>
  <a href="Modeling.html">Modeling</a>
</li>
<li>
  <a href="Report.html">Report</a>
</li>
<li>
  <a href="map.html">Interactive Map</a>
</li>
<li>
  <a href="https://zz2780.shinyapps.io/shiny_dashboard/?_ga=2.29643064.641722041.1670377109-1574925733.1669738083">Shiny</a>
</li>
<li>
  <a href="https://github.com/zz2780/crimeweather_final_project.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="mailto:&lt;hw2861@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://spotcrime.com">
    <span class="fa fa-solid fa-bell"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Report</h1>

</div>


<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>Based on the Lombroso’s Theory of Crime, natural climatic factors can
influence crime rates. The Extreme temperatures sap one’s energy and
reduce the passion for crime. The suitable temperatures stimulate one’s
nerve like alcohol and makes it easier to commit criminal acts in an
excited situation.</p>
<p>In fact, the weather in criminology covers many aspects. Apart from
the weather itself, it also involves the seasons as well as the
temperature. All of these natural events occur in the spatial and
temporal dimensions and recur with regularity from year to year
constitutes a season. In order to fully discuss the changes of crime
rates in the time dimension, we also consider the changes in crime rates
at different times of the day and on different days of the week.</p>
</div>
<div id="initial-questions" class="section level2">
<h2>Initial Questions</h2>
<ul>
<li>Is frequency of crimes associated with temperature of the day?</li>
<li>Is frequency of crimes associated with precipitation/snowfall of the
day?</li>
<li>Do different times of the day and days of the week have an impact on
the association above?</li>
</ul>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>In Our project, there are two datasets, including NYPD Complaint Data
Historic and weather data. We obtained crime data in New York City from
NYC Open Data * Crime data of New York City is downloaded from the link
below : <a
href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i">NYPD
Complaint Data Historic</a>.</p>
<p>This dataset contains 780 million felony, misdemeanor, and violation
crimes reported to the New York City Police Department (NYPD) from 1910
to 2021. Each record contains detailed information of a single crime
reported to NYPD. In our project, we select the records from 2016-01-01
to 2017-12-31 to do analysis and modeling.</p>
<p>For further analysis, we converted the original dataset to make it
more readable and selected some key variables:</p>
<ul>
<li><code>date</code>. Date the crime occurs.</li>
<li><code>hour_of_day</code>. Occurring time of the crimes</li>
<li><code>borough</code>. Borough the crime occurs.</li>
<li><code>level</code>. Level of offense: felony, misdemeanor,
violation.</li>
<li><code>offense</code>. Description of offense.</li>
<li><code>offense_classification</code>. Description of internal
classification of offense.</li>
<li><code>place</code>. Specific description of premises; grocery store,
residence,street, etc.</li>
<li><code>suspect_age</code>. Suspect’s Age Group.</li>
<li><code>suspect_race</code>. Suspect’s Race Description.</li>
<li><code>suspect_sex</code>. Suspect’s Sex Description.</li>
<li><code>victim_age</code>. Victim’s Age Group.</li>
<li><code>victim_race</code>. Victim’s Race Description.</li>
<li><code>victim_sex</code>. Victim’s Sex Description.</li>
<li><code>day_of_week</code>. Day of week that a crime occurs.</li>
<li><code>mon</code>. Months in a year that a crime occurs.</li>
<li><code>latitude</code>. Latitude of the place the crime occurs.</li>
<li><code>longitude</code>. Longitude of the place the crime
occurs.</li>
</ul>
<p>Considering that weather may be a reason of committing crime, we used
data from three weather stations in New York and calculate the mean
weather parameters to represent the weather of New York.</p>
<p>Weather data is obtained from website of <a
href="https://www.ncei.noaa.gov/metadata/geoportal/rest/metadata/item/gov.noaa.ncdc:C00861/html">NOAA</a></p>
<p>The key variables of weather are:</p>
<ul>
<li><code>mean_snow</code>. snow depth(mm).</li>
<li><code>mean_prcp</code>. precipitation(tenths of mm)</li>
<li><code>mean_tmin</code>. minimum temperature of a day</li>
<li><code>mean_tmax</code>. maximum temperature of a day</li>
</ul>
</div>
<div id="exploratory-analysis" class="section level2">
<h2>Exploratory Analysis</h2>
<p>Based on some publicly available information, we knew that weather
affect crime rate. For example, the hotter the weather is, the more
likely people are to commit crimes. The worse the weather is, the less
likely people are to go out and commit crimes. Here we want to predict
number of crimes each day in New York as our outcome. And the
precipitation, snow depth, maximum temperature and minimum temperature
can be considered as predictors.</p>
<p>We checked the distribution of number of crime cases each day in New
York.</p>
<pre class="r"><code>ggplot(data = crime_weather,aes(x = total_crime)) + geom_histogram()+ 
  labs(title = &quot;The distribution of daily cases&quot;, 
       y = &quot;Counts&quot;, 
       x = &quot;Number of crimes per day&quot;)+
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="Report_files/figure-html/unnamed-chunk-3-1.png" width="768" /></p>
<p>The distribution of daily cases is approximately normally
distributed, thus we do not need to transform the value of the
outcome.</p>
<p>Then, we use scatter plot to investigate the association between
weather and cases/crime.</p>
<pre class="r"><code>ggplot(crime_weather, aes(x = mean_tmax, y = total_crime)) + geom_point()+    labs(title = &quot;The Association between Max temperatures and reported crime&quot;, 
       y = &quot;Total Crime reported&quot;, 
       x = &quot;Max temperatures of a day&quot;)+
    theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="Report_files/figure-html/unnamed-chunk-4-1.png" width="768" /></p>
<pre class="r"><code>ggplot(crime_weather, aes(x = mean_tmin, y = total_crime)) + geom_point()+    labs(title = &quot;The Association between Min temperatures and reported crime&quot;, 
       y = &quot;Total Crime reported&quot;, 
       x = &quot;Min temperatures of a day&quot;)+
    theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="Report_files/figure-html/unnamed-chunk-4-2.png" width="768" /></p>
<pre class="r"><code>ggplot(crime_weather, aes(x = mean_prcp, y = total_crime)) + geom_point()+    labs(title = &quot;The Association between precipitation and reported crime&quot;,
       y = &quot;Total Crime reported&quot;, 
       x = &quot;Precipitation(tenths of mm)&quot;)+
    theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="Report_files/figure-html/unnamed-chunk-4-3.png" width="768" /></p>
<pre class="r"><code>ggplot(crime_weather, aes(x = mean_snow, y = total_crime)) + geom_point()+    labs(title = &quot;The Association between snowfall and reported crime&quot;,
       y = &quot;Total Crime reported&quot;, 
       x = &quot;Snow depth(mm)&quot;)+
    theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="Report_files/figure-html/unnamed-chunk-4-4.png" width="768" /></p>
<p>From the plots, we noticed that all of the four predictors may have
association with the number of cases of crime in New York. We also want
to investigate whether the month and day of week can be predictors.
(Beginning of EDA)</p>
</div>
<div id="statistical-analysis" class="section level2">
<h2>Statistical Analysis</h2>
<div id="statistical-test" class="section level4">
<h4>Statistical test</h4>
<p>We want to explore more on our data. So we conducted some statistical
test. First, we conducted a Chi-squared test on year and number of cases
each month to check whether the distribution of number of cases per
month is different between the two years. The result shows that there is
a significant difference of distribution between the two years.</p>
<p>And then we want to investigate whether weather is a significant
factor on number of crime cases. We combine the two dataset and create a
categorical variable according to the weather parameters each day and
devided them into four types: “rainy and snowy”, “snowy”, “rainy”, “not
rainy or snowy”. After that, we conducted a ANOVA test between number of
crimes per day and weather. From the result, we came to conclude that
the the average number of crimes per day is significantly different in
different weather.</p>
<p>We also conducted a Chi-squared test on number of different types of
crimes and weather. We learned from the result that there is not a
homogeneity in the types of crimes for each type of weather. So we
conclude that weather may also has an association with the type of
crimes.</p>
</div>
<div id="modeling" class="section level4">
<h4>Modeling</h4>
<p>We already know that weather may influence crimes from previous
analysis. So we decided to build a model to predict daily crimes cases.
We proposed following models:</p>
<ul>
<li>Model1: total_crime ~ day_of_week + mean_tmax + mean_prcp +
mean_snow</li>
<li>Model2: total_crime ~ month +day_of_week + mean_tmax + mean_prcp +
mean_snow</li>
<li>Model3: total_crime ~ month +day_of_week + mean_tmax + mean_prcp +
mean_snow + mean_tmax*day_of_week</li>
<li>Model4: total_crime ~ mean_tmax + mean_prcp + mean_snow</li>
</ul>
<p>We use cross validation to compare the four models and performed a
diagnostics and we concluded that Model3 is the best and it meet the
model assumptions. We should select month, day of week, maximum
temperature, precipitation, snow depth and a interaction term between
temperature as our predictors.</p>
</div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
